# Map Kibera Schools Data Processing

## Get schools data from Overpass Turbo

[Overpass Turbo](https://overpass-turbo.eu/#) allows you to query and download data from OpenStreetMap. It’s a powerful query language with many options; the `Wizard` makes it easy to construct queries.


![](https://paper-attachments.dropbox.com/s_DE407240EB10FC0069AFCAFFE2DF66D94E2135BF0F2439E43AAD55E36B6FF5E2_1565783217420_image.png)

[](https://overpass-turbo.eu/#)
Here we search for schools with `amenity=school`. Then hand edit the query generated by the wizard, removing the `way` and `relation` lines — we only want points, or `nodes` in OSM lexicon.

Select `Export` then `download` as GeoJSON.


## Identify schools in road clearance zone

We are going to use [QGIS](https://qgis.org/en/site/) to identify and add information on which schools are in the road clearance zone. We will reference UAV imagery collected and added to [this Mapbox map](https://api.mapbox.com/styles/v1/mikelmaron/cjlz9qhei6a5m2sqmpngfeb26.html?fresh=true&title=true&access_token=pk.eyJ1IjoibWlrZWxtYXJvbiIsImEiOiJjaWZlY25lZGQ2cTJjc2trbmdiZDdjYjllIn0.Wx1n0X7aeCQyDTnK6_mrGw#14.5/-1.31024/36.78857).

Add the Mapbox layer to QGIS using [these instructions](https://docs.mapbox.com/help/tutorials/mapbox-arcgis-qgis/#add-mapbox-maps-in-qgis).  Then click `Add Vector Layer`, and add the downloaded GeoJSON. Now, it’s not possible to edit GeoJSON in QGIS, so `Save as`  a `SpatiaLite` file. 

Use the `Select Features by Freehand` tool, and select the schools within the road clearance zone.

![](https://paper-attachments.dropbox.com/s_DE407240EB10FC0069AFCAFFE2DF66D94E2135BF0F2439E43AAD55E36B6FF5E2_1565785338867_image.png)


Then `Open Attribute Table` and `Toggle editing mode`. Click `New column`, and enter `road_clearance` for `Name`. Next `Show selected features`, and manually enter `y` in the new column. Finally `Save as` a `GeoJSON` file.

## Convert to CSV

Use [http://geojson.io](http://geojson.io/) to convert. `Open` your file to `Upload` . Then `Save` as `CSV`

There is one manual fix required to the header names. In GeoJSON and in OpenStreetMap, property keys with different capitalization are considered distinct; unfortunately these kinds of errors are present in OSM data sometimes. And in tools like PowerBI, capitalization is not taken into account and will generate errors. So, open the CSV in a text editor and change `Operational_status` to `operational_status_2`, and `polling_station:Election_year` to `polling_station:election_year_2`, and save.


